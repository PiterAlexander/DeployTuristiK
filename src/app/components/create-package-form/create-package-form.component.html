<div class="modal-header">
    <h3 class="pt-3 mb-1" style="color: #6366F1;">{{ActionTitle}} paquete</h3>
</div>
<div class="modal-body">

    <form class="needs-validation" novalidate id="form" (submit)="savePackage()" [formGroup]="formGroup">
        <div class="row">
            <div class="col-9">
                <div class="field">
                    <label for="name">Nombre del paquete</label>
                    <span class="w-100">
                        <input type="text" pInputText class="w-full input-design" [ngClass]="
                                {'invalid': formGroup.get('name').dirty && (formGroup.get('name')?.errors || validateExistingPackageName()),
                                'valid': formGroup.get('name').dirty && !formGroup.get('name')?.errors
                                && !validateExistingPackageName()}" formControlName="name" required
                            onkeydown="return /^[A-Za-z0-9\u00C0-\u00FF\s]+$/i.test(event.key)"
                            placeholder="Nombre del paquete">
                    </span>

                    <div *ngIf="formGroup.get('name').errors?.['required'] && formGroup.get('name').dirty"
                        class="invalid-feedback">
                        *Este campo es obligatorio.
                    </div>
                    <div *ngIf="formGroup.get('name').errors?.['minlength'] && formGroup.get('name').dirty"
                        class="invalid-feedback">
                        *El nombre del paquete debe tener mínimo 8 caracteres.
                    </div>
                    <div *ngIf="validateExistingPackageName() && formGroup.get('name').dirty" class="invalid-feedback">
                        *Hay un paquete con ese nombre ya está registrado.
                    </div>
                </div>
            </div>
            <div class="col-3 w-100">
                <div class="field">
                    <label for="transport">Transporte</label>
                    <p-dropdown inputId="package_transportation" optionValue="label" [options]="transports"
                        placeholder="Seleccione un transporte">
                        <ng-template class="w-100" let-option pTemplate="item">
                            <span class="w-100" [class]="'product-badge status-' + option.value">{{option.label}}</span>
                        </ng-template>
                    </p-dropdown>
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-12">
            <label for="description">Descripción</label>
                <textarea pInputTextarea required style="width: 100%; height: 100px;"
                    placeholder="Ingrese la descripción del paquete" formControlName="details" [ngClass]="
                        {
                            'invalid': formGroup.get('details').dirty && (formGroup.get('details')?.errors),
                            'valid': formGroup.get('details').dirty && !formGroup.get('details')?.errors
                        }"></textarea>

                <div *ngIf="formGroup.get('details').errors?.['required'] && formGroup.get('details').dirty"
                    class="invalid-feedback">
                    *Este campo es obligatorio.
                </div>
                <div *ngIf="formGroup.get('details').errors?.['minlength'] && formGroup.get('details').dirty"
                    class="invalid-feedback">
                    *La descripción del paquete debe tener almenos 15 caracteres.
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="field">
                    <label for="destination">Destino</label>
                    <span class="p-input-icon-left w-100">
                        <i class="pi pi-map-marker "></i>
                        <input type="text" class="w-100 input-design" pInputText [ngClass]="
                                                    {
                                                        'invalid': formGroup.get('destination').dirty && (formGroup.get('destination')?.errors),
                                                        'valid': formGroup.get('destination').dirty && !formGroup.get('destination')?.errors
                                                    }" formControlName="destination" required
                            placeholder="Ingrese el lugar de destino"
                            onkeydown="return /^[A-Za-z0-9\u00C0-\u00FF\s]+$/i.test(event.key)">
                    </span>
                    <div *ngIf="formGroup.get('destination').errors?.['required'] && formGroup.get('destination').dirty"
                        class="invalid-feedback">
                        *Este campo es obligatorio.
                    </div>
                    <div *ngIf="formGroup.get('destination').errors?.['minlength'] && formGroup.get('destination').dirty"
                        class="invalid-feedback">
                        *El destino del paquete debe tener mínimo 8 caracteres.
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="field">
                    <label for="package_departure_place">Lugar de salida</label>
                    <span class="p-input-icon-left w-100">
                        <i class="pi pi-map-marker "></i>
                        <input type="text" pInputText id="float-input" name="package_departure_place"
                            placeholder="Ingrese el lugar de partida" formControlName="package_departure_place"
                            class="input-design w-100" formControlName="departurePoint" required
                            onkeydown="return /^[A-Za-z0-9\u00C0-\u00FF\s]+$/i.test(event.key)">
                    </span>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-3 w-100">
                <div class="flex flex-column">
                    <label for="calendar">Fecha de Salida</label>

                    <span class="p-input-icon-left w-full">
                        <p-calendar formControlName="departureDate" id="calendar" name="calendar" placeholder="Fecha de salida" showIcon="true"
                            dateFormat="dd/mm/yy" [showTime]="true" [required]="true" class="calendar" [ngClass]="{
                                'is-invalid': formGroup.get('departureDate').dirty && formGroup.get('departureDate').invalid
                              }"></p-calendar>
                    </span>
                    <div class="invalid-feedback"
                        *ngIf="formGroup.get('departureDate').errors && formGroup.get('departureDate').errors.fechaInvalida">
                        *La fecha debe ser mayor que la fecha de hoy.
                    </div>
                </div>

            </div>
            <div class="col-3 w-100">
                <label for="calendar">Fecha de regreso</label>
                <span class="p-input-icon-left w-full">
                    <p-calendar formControlName="arrivalDate" placeholder="Fecha de regreso" showIcon="true" id="calendar" name="calendar"
                        class="calendar" dateFormat="dd/mm/yy" [showTime]="true" [required]="true" [ngClass]="{
                            'is-invalid': formGroup.get('arrivalDate').dirty && formGroup.get('arrivalDate').invalid
                          }"></p-calendar>
                </span>
                <div class="invalid-feedback"
                    *ngIf="formGroup.get('arrivalDate').errors?.required && formGroup.get('arrivalDate').dirty">
                    *La fecha de regreso es requerida.
                </div>
                <div class="invalid-feedback" *ngIf="formGroup.get('arrivalDate').errors?.fechaInvalida">
                    *La fecha debe ser mayor que la fecha de hoy y mayor que la fecha de salida.
                </div>
            </div>
            <div class="col-6">
                <div class="field">
                    <label for="package_hotel">Hotel</label>
                    <span class="p-input-icon-left w-full">
                        <i class="pi pi-building"></i>
                        <input type="text" pInputText name="package_hotel" class="input-design w-100"
                            formControlName="hotel" required
                            onkeydown="return /^[A-Za-z0-9\u00C0-\u00FF\s]+$/i.test(event.key)"
                            placeholder="Ingrese el nombre del hotel">
                    </span>

                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="field">
                    <label for="totalQuotas">Cantidad de cupos</label>

                    <span class="p-input-icon-left w-full">
                        <i class="pi pi-search-plus "></i>
                        <span class="p-input-icon-left w-full">
                            <i class="pi pi-users"></i>
                            <input type="number" id="totalQuotas" name="totalQuotas" pInputText class="w-full"
                                formControlName="totalQuotas" placeholder="Ingrese el precio del paquete"
                                required="true" onkeydown="return /^\d|Backspace|Delete$/.test(event.key)">
                        </span>

                        <small class="p-error block" *ngIf="formGroup.get('totalQuotas').errors?.required.dirty">*Este
                            campo es
                            obligatorio.</small>

                        <small class="p-error block" *ngIf="formGroup.get('totalQuotas').errors?.min">*La cantidad de
                            cupos
                            debe
                            superar a
                            15.</small>
                    </span>
                </div>
            </div>
            <div class="col-6">
                <div class="field">
                    <label for="price">Precio</label>
                    <span class="p-input-icon-left w-full">
                        <i class="pi pi-users"></i>
                        <input type="number" id="price" name="price" pInputText class="w-full" formControlName="price"
                            placeholder="Ingrese el precio del paquete" required="true"
                            onkeydown="return /^\d|Backspace|Delete$/.test(event.key)">
                    </span>
                    <small class="p-error block" *ngIf="formGroup.get('price').errors?.required.dirty">*Este campo es
                        obligatorio.</small>
                    <small class="p-error block" *ngIf="formGroup.get('price').errors?.min">*El precio debe ser mayor a
                        $150.000.</small>
                </div>
            </div>
        </div>
        <div>
            <input type="checkbox" id="typePackage" formControlName="type" class="mr-2 mt-2">
            <label for="typePackage">Marque esta opción si el paquete sera privado</label>

        </div>
        <div class="modal-footer d-flex justify-content-end surface-0">
            <div class="row">
                <div class="col">
                    <button pbutton="" label="Clear" icon="pi pi-times" (click)="cancel()" id="cancelButton"
                        style="border-color: #6366F1;" type="button"
                        class="p-element p-button-outlined mb-2 p-button p-component" ng-reflect-label="Clear"
                        ng-reflect-icon="pi pi-times"><span class="p-button-icon p-button-icon-left pi pi-times"
                            aria-hidden="true"></span><span class="p-button-label">Cancelar</span></button>


                </div>
                <div class="col">
                    <button pbutton="" pripple="" type="button" *ngIf="!validForm()"
                        style="background-color: #6366F1; border-color: #6366F1;" type="submit" id="saveButton"
                        label="Save" icon="pi pi-check" ptooltip="Clic para guardar"
                        class="p-element p-ripple p-button p-component" ng-reflect-text="Clic para guardar"
                        ng-reflect-label="Save" ng-reflect-icon="pi pi-check" fdprocessedid="x7i42q">
                        <span class="p-button-icon p-button-icon-left pi pi-check" aria-hidden="true">
                        </span>
                        <span class="p-button-label">Guardar</span>
                        <span class="p-ink"></span></button>

                    <!-- Button to valid form -->
                    <button pbutton="" pripple="" type="button" *ngIf="validForm()"
                        style="background-color: #6366F1; border-color: #6366F1;" type="submit" id="saveButton"
                        label="Save" icon="pi pi-check" ptooltip="Clic para guardar"
                        class="p-element p-ripple p-button p-component" ng-reflect-text="Clic para guardar"
                        ng-reflect-label="Save" ng-reflect-icon="pi pi-check" fdprocessedid="x7i42q">
                        <span class="p-button-icon p-button-icon-left pi pi-check" aria-hidden="true">
                        </span>
                        <span class="p-button-label">Guardar</span>
                        <span class="p-ink"></span></button>
                </div>
            </div>
        </div>
    </form>


</div>
<!-- <div class="row">

                        <div class="form-group col-6">
                            <label for="package_transportation" class="form-label">Transporte</label>
                            <div class="input-group">
                                <select class="custom-select border-left-dark form-control formularioCampo"
                                    id="package_transportation" name="package_transportation"
                                    formControlName="transport" placeholder="Seleccione el tipo de transporte">
                                    <option selected disabled value="0">Seleccione el tipo de transporte</option>
                                    <option value="1">Aereo</option>
                                    <option value="2">Terreste</option>
                                </select>
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fas fa-bus"></i></span>
                                </div>
                                <div *ngIf="formGroup.get('transport').errors && formGroup.get('transport').dirty && formGroup.get('transport').value == 0 "
                                    class="invalid-feedback">
                                    Por favor seleccione una opción.
                                </div>
                            </div>
                        </div>


                    </div> -->