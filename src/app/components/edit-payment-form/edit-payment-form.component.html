<p-confirmDialog icon="pi pi-exclamation-triangle"></p-confirmDialog>
<form novalidate [formGroup]="formGroup">
    <div>
        <h2 class="mx-0 mt-0 mb-4 text-indigo-500">Editar abono</h2>
    </div>
    <div class="mb-5">
        <div class="flex justify-content-center">
            <p-image appendTo="body" class="shadow-2" [src]="baseUrl + payment.image" alt="Comprobante" width="250"
                [preview]="true"></p-image>
        </div>
    </div>
    <p-divider></p-divider>
    <div class="field mb-4">
        <p-dropdown [options]="statuses" appendTo="body" showClear="true" placeholder="Seleccione el estado del abono"
            formControlName="status" [style]="{ width: '100%' }">
        </p-dropdown>
        <small class="p-error block"
            *ngIf="formGroup.get('status')?.dirty && formGroup.get('status')?.errors?.['required']">
            Este campo es obligatorio
        </small>
    </div>
    <div *ngIf="formGroup.value.status === 2" class="field mb-4">
        <textarea pInputTextarea required="true" rows="3" class="w-full"
            placeholder="Por favor especifique la razón del rechazo de este abono, tenga en cuenta que este comentario se le enviará al cliente titular del pedido"
            formControlName="details"></textarea>
        <small *ngIf="formGroup.get('details').errors?.['required'] && formGroup.get('details')?.dirty"
            class="p-error block">
            Este campo es obligatorio
        </small>
    </div>
    <div class="flex justify-content-end">
        <div class="flex align-items-end">
            <button pButton pRipple type="button" (click)="back()" label="Regresar" icon="pi pi-angle-left"
                class="p-button-outlined mr-3"></button>
            <p-button *ngIf="validForm()" (click)="confirmation()" label="Guardar" icon="pi pi-check"></p-button>
            <p-button *ngIf="!validForm()" label="Guardar" icon="pi pi-check" disabled="true"></p-button>
        </div>
    </div>
</form>