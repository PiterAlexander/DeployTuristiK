<form novalidate [formGroup]="formGroup">
    <div class="p-2">
        <div class="field mb-4">
            <label for="packageId" class="block">Paquete</label>
            <span class="p-input-icon-left">
                <i class="pi pi-sun"></i>
                <p-dropdown [options]="allPackages" optionLabel="name" optionValue="packageId"
                    placeholder="Seleccione el nombre del paquete" required="true" formControlName="packageId"
                    [style]="{ width: '38.1rem' }"></p-dropdown>
            </span>
            <small class="p-error block"
                *ngIf="formGroup.get('packageId')?.errors?.['required'] && formGroup.get('packageId').dirty">
                Este campo es obligatorio.
            </small>
        </div>
        <div class="grid">
            <div class="col">
                <div class="field">
                    <label for="document" class="block">Persona titular</label>
                    <span class="p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input pInputText placeholder="Ingrese el número de documento del titular" type="text"
                            formControlName="document" required="true" minlength="8" maxlength="15"
                            [style]="{ width: '24.5rem' }">
                    </span>
                    <small class="p-error block"
                        *ngIf="formGroup.get('document').dirty && formGroup.get('document')?.errors?.['required']">
                        Este campo es obligatorio.
                    </small>
                    <small class="p-error block"
                        *ngIf="formGroup.get('document').dirty && formGroup.get('document')?.errors?.['minlength']">
                        Este campo debe tener mínimo 8 números.
                    </small>
                    <small class="p-error block" *ngIf="formGroup.get('document').dirty && validateCustomerId()">
                        Este documento no está asociado a ningún cliente.
                    </small>
                    <small class="p-error block" *ngIf="formGroup.get('document').dirty && validateRole()">
                        Solo los clientes pueden ser titulares de un pedido.
                    </small>
                </div>
            </div>
            <div class="col">
                <div class="field">
                    <label for="beneficiariesAmount">Beneficiarios</label>
                    <p-inputNumber *ngIf="!formGroup.get('packageId').dirty && orderProcess === undefined"
                        inputId="integeronly" disabled="true" readonly="true" placeholder="Seleccione un paquete"
                        [style]="{ width: '12.5rem' }">
                    </p-inputNumber>
                    <p-inputNumber *ngIf="formGroup.get('packageId').dirty || orderProcess !== undefined"
                        inputId=" integeronly" formControlName="beneficiariesAmount" placeholder="¿Cuántos viajarán?"
                        required="true" [style]="{ width: '12.5rem' }">
                    </p-inputNumber>
                    <small class="p-error block"
                        *ngIf="formGroup.get('beneficiariesAmount').dirty && formGroup.get('beneficiariesAmount')?.errors?.['required']">
                        Este campo es obligatorio.
                    </small>
                    <small class="p-error block"
                        *ngIf="formGroup.get('beneficiariesAmount').dirty && !validateBeneficiariesAmount()">
                        Debe haber al menos un beneficiario.
                    </small>
                    <small class="p-error block"
                        *ngIf="formGroup.get('beneficiariesAmount').dirty && orderProcess == null && !validateBeneficiaries()">
                        Cupos disponibles: {{onePackage.availableQuotas}}.
                    </small>
                    <small class="p-error block"
                        *ngIf="(orderProcess != null && formGroup.get('packageId').dirty && !validateBeneficiaries()) || (orderProcess != null && formGroup.get('beneficiariesAmount').dirty && !validateBeneficiaries())">
                        Cupos disponibles: {{onePackage.availableQuotas}}.
                    </small>
                    <small class="p-error block"
                        *ngIf="validateBeneficiaries() && !validateExistingBeneficiariesAmount() && formGroup.get('beneficiariesAmount').dirty">
                        Capacidad minima de beneficiarios: {{beneficiariesAmount}}.
                    </small>
                </div>
            </div>
        </div>
    </div>
    <div class="flex justify-content-end">
        <button pButton pRipple type="button" (click)="cancel()" label="Cancelar" icon="pi pi-times"
            class="p-button-outlined mr-3"></button>
        <button *ngIf="validForm()" pButton pRipple type="button" (click)="next()" label="Siguiente"
            icon="pi pi-check"></button>
        <button *ngIf="!validForm()" pButton pRipple type="button" (click)="next()" label="Siguiente" icon="pi pi-check"
            disabled></button>
    </div>
</form>