<p-toast key="alert-message"></p-toast>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<div *ngIf="role === 'Cliente' || role === undefined">
    <div class="surface-section px-2 py-4 md:px-4 lg:px-4 border-1 surface-border" style="border-radius: 15px;">
        <p-dataView id="myDv" #dv [value]="arrayPackagesClient" [paginator]="true" [rows]="3" filterBy="name"
            layout="grid">
            <ng-template pTemplate="header">
                <div class="flex flex-column md:flex-row justify-content-between align-items-center">
                    <div class="flex flex-column text-center md:text-left">
                        <span class="text-900 text-2xl mb-2">Paquetes</span>
                        <span class="text-700 text-lg">Donde todas sus pr√≥ximas aventuras esperan por usted.</span>
                    </div>
                    <div class="col-5">
                        <div class="flex flex-column gap-2">
                            <span class="p-input-icon-left input-design">
                                <i class="pi pi-search"></i>
                                <input class="w-full small-input" type="search" pInputText
                                    placeholder="Buscar paquete por nombre" (input)="onFilter(dv, $event)">
                            </span>
                        </div>
                    </div>
                </div>
            </ng-template>
            <ng-template let-package pTemplate="gridItem">
                <div class="col-12 md:col-4 p-4">
                    <div class="p-4 surface-card surface-border card-shadow">
                        <div class="relative mb-3">
                            <span class="surface-card text-900 shadow-2 px-3 py-2 absolute"
                                style="border-radius: 1.5rem; left: 1rem; top: 1rem">{{package.availableQuotas}}
                                cupos</span>
                            <img src="https://chipviajero.com/wp-content/uploads/2018/05/Como-Llegar-a-Tol%C3%BA-Y-Cove%C3%B1as-Chip-Viajero-7.jpg"
                                class="w-full" />
                        </div>
                        <div class="flex flex-column align-items-center text-center mb-3">
                            <div class="flex justify-content-between align-items-center mb-3">
                                <span class="text-900 font-medium text-xl">{{package.name}}</span>
                                <span>
                                    <i class="pi pi-star-fill text-yellow-500 mr-1"></i>
                                    <span class="font-medium">5.0</span>
                                </span>
                            </div>
                            <p class="mt-0 mb-3 text-700 line-height-3">
                                <span pTooltip="Fecha de salida" style="cursor: pointer;" tooltipPosition="bottom">
                                    <i class="pi pi-calendar p-1"></i>
                                    {{package.departureDate | date}}
                                </span> -
                                <span style="cursor: pointer;" pTooltip="Fecha de regreso" tooltipPosition="bottom">
                                    <i class="pi pi-calendar p-1"></i>
                                    {{package.arrivalDate | date}}
                                </span>
                            </p>
                            <p class="mt-0 mb-3 text-700 line-height-3">
                                <span pTooltip="Hotel" style="cursor: pointer;" tooltipPosition="bottom">
                                    <i class='bx bx-buildings p-1'></i>
                                    {{package.hotel}}
                                </span>
                            </p>
                        </div>

                        <div class="flex justify-content-between">
                            <span class="flex align-items-end text-primary text-2xl font-medium">{{package.price |
                                currency:
                                'USD'}}</span>
                            <button pButton pRipple type="button" label="Ver detalles"
                                (click)="verDetalles(package.packageId)" class="p-button-outlined p-button-sm"></button>
                        </div>
                    </div>
                </div>
            </ng-template>
        </p-dataView>
    </div>
    <!-- <div class="grid content">
        <div class="col-12">
            <div>
                <div class="card">

                    <p-dataView #dv [value]="arrayPackagesClient" [paginator]="true" [rows]="3" filterBy="name"
                        [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">

                        <ng-template pTemplate="header" style="background-color : #ffffff !important; border: none;">
                            <div class="grid">
                                <div class="col-7">
                                    <div class="text-900 font-medium text-4xl mb-3">
                                        Paquetes
                                    </div>
                                    <p class="mt-0 p-0 text-700 text-2xl">
                                        Seleccion exclusiva
                                    </p>

                                </div>
                                <div class="col-5">
                                    <div class="flex flex-column gap-2">
                                        <span class="p-input-icon-left input-design">
                                            <i class="pi pi-search"></i>
                                            <input class="w-full small-input" type="search" pInputText
                                                placeholder="Busca por el nombre..." (input)="onFilter(dv, $event)">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </ng-template>

                        <ng-template let-package pTemplate="gridItem">
                            <div class="col-12 md:col-4 p-3">
                                <div class="p-4 surface-card surface-border card-shadow">
                                    <div class="relative mb-3">
                                        <span class="surface-card text-900 shadow-2 px-3 py-2 absolute"
                                            style="border-radius: 1.5rem; left: 1rem; top: 1rem">{{package.availableQuotas}}
                                            cupos</span>
                                        <img src="https://chipviajero.com/wp-content/uploads/2018/05/Como-Llegar-a-Tol%C3%BA-Y-Cove%C3%B1as-Chip-Viajero-7.jpg"
                                            class="w-full" />
                                    </div>
                                    <div class="flex flex-column align-items-center text-center mb-3">
                                        <div class="flex justify-content-between align-items-center mb-3">
                                            <span class="text-900 font-medium text-xl">{{package.name}}</span>
                                            <span>
                                                <i class="pi pi-star-fill text-yellow-500 mr-1"></i>
                                                <span class="font-medium">5.0</span>
                                            </span>
                                        </div>
                                        <p class="mt-0 mb-3 text-700 line-height-3">
                                            <span pTooltip="Fecha de salida" style="cursor: pointer;"
                                                tooltipPosition="bottom">
                                                <i class="pi pi-calendar p-1"></i>
                                                {{package.departureDate | date}}
                                            </span> -
                                            <span style="cursor: pointer;" pTooltip="Fecha de regreso"
                                                tooltipPosition="bottom">
                                                <i class="pi pi-calendar p-1"></i>
                                                {{package.arrivalDate | date}}
                                            </span>
                                        </p>
                                        <p class="mt-0 mb-3 text-700 line-height-3">
                                            <span pTooltip="Hotel" style="cursor: pointer;" tooltipPosition="bottom">
                                                <i class='bx bx-buildings p-1'></i>
                                                {{package.hotel}}
                                            </span>
                                        </p>
                                    </div>

                                    <div class="grid">
                                        <div class="col-8 px-4">
                                            <span class="text-primary text-xl font-medium">{{package.price | currency: 'USD'}}</span>
                                        </div>
                                        <div class="col-4">
                                            <button pButton type="button" label="Ver detalles" (click)="verDetalles(package.packageId)"
                                                style="color: var(--primary-color); border: 1px solid var(--primary-color) !important;"></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-template>
                    </p-dataView>
                </div>
            </div>
        </div>
    </div> -->
    <br>
</div>

<div *ngIf="role !== 'Cliente' && role !== undefined" class="p-4">
    <div class="col-12">
        <div class="card px-6 py-6" style="border-radius: 15px;">
            <p-table #dt [value]="packagesList" [rows]="5" [loading]="loading" [paginator]="true"
                [globalFilterFields]="['name', 'destination', 'departureDate', 'arrivalDate', 'availableQuotas', 'price', 'status']">
                <ng-template pTemplate="caption">
                    <div class="flex justify-content-between">
                        <span class="mt-2 md:mt-0 p-input-icon-right">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" (input)="dt.filterGlobal($event.target.value, 'contains')"
                                placeholder="Buscar..." />
                        </span>
                        <button pButton p pRipple type="button" label="Registrar paquete" icon="pi pi-plus"
                            (click)="show()" class="p-button-outlined"></button>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <th class="font-medium" style="min-width: 15rem">
                            Nombre
                        </th>
                        <th class="font-medium" style="min-width: 10rem">
                            Fechas
                        </th>
                        <th class="font-medium" style="min-width: 10rem">
                            Cupos disponibles
                        </th>
                        <th class="font-medium" style="width: 10rem">
                            Precio
                        </th>
                        <th class="font-medium text-center" style="width: 10rem">
                            Acciones
                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-package>
                    <tr>
                        <td>
                            {{ package.name }}
                        </td>
                        <td>
                            <span pTooltip="Fecha de salida">
                                {{ package.departureDate | date: 'dd/MM/yyyy' }}
                            </span>
                            <br>
                            <span pTooltip="Fecha de regreso">
                                {{ package.arrivalDate | date: 'dd/MM/yyyy' }}
                            </span>
                        </td>
                        <td>
                            {{ package.availableQuotas }}
                        </td>
                        <td>
                            {{ package.price | currency: 'USD':'symbol' }}
                        </td>
                        <td class="flex justify-content-around">
                            <button pButton type="button" icon="pi pi-pencil"
                                class="p-button-outlined p-button-warning p-button-rounded m-1"
                                (click)="openEditPackageModal(package)" pTooltip="Editar"
                                tooltipPosition="bottom"></button>
                            <button pButton type="button" icon="pi pi-info-circle"
                                class="p-button-outlined p-button-rounded m-1" pTooltip="Ver detalles"
                                tooltipPosition="bottom"></button>
                        </td>
                    </tr>
                </ng-template>
                <ng-template pTemplate="emptymessage">
                    <tr>
                        <td colspan="9">No se encontraron paquetes.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>