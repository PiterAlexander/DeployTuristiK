<!--AquÃ­ se despliegan los mensajes de exito o error segun sea el caso-->
<p-toast key="alert-message"></p-toast>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>
<div class="col-12">
  <div class="card px-6 py-6 p-4 m-5" style="border-radius: 15px;">
    <p-table #dt [value]="roleList" [rows]="5" scrollable="true" [rowsPerPageOptions]="[5, 10]"
    [loading]="loading" [paginator]="true"
    currentPageReportTemplate="Desde {first} hasta {last} de {totalRecords} roles"
    [globalFilterFields]="['name']">
        <ng-template pTemplate="caption" class="p-grid">
          <div class="custom-flex-container flex justify-content-between">
              <div class="custom-flex-item-left">
                  <span class="mt-2 md:mt-0 p-input-icon-right">
                      <i class="pi pi-search"></i>
                      <input pInputText  (input)="dt.filterGlobal($event.target.value, 'contains')" type="text" placeholder="Buscar..." />
                  </span>
              </div>
              <div class="custom-flex-item-right">
                  <button pButton type="button" label="Registrar Rol" (click)="openCreateRoleModal()"
                      class="p-button-outlined"><i class="pi pi-plus"
                          style="margin-left: 5px; margin-right: 9px;"></i></button>
              </div>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
              <th style="width: 5rem">
                  <div class="flex justify-content-left align-items-left">
                      Nombre
                  </div>
              </th>
              <th style="width: 5rem">
                <div class="flex justify-content-center align-items-center">
                    Estado
                </div>
              </th>
              <th style="width: 5rem">
                  <div class="flex justify-content-center align-items-center">
                      Acciones
                  </div>
              </th>
          </tr>
      </ng-template>

      <ng-template pTemplate="body" let-role>
        <tr>
            <td>
                {{ role.name }}
            </td>
            <td class="text-center">
              <span [class]="'role-badge status-' + role.status">{{showStatus(role.status)}}</span>
            </td>
            <td class="text-center p-1">
                <button pButton type="button" icon="pi pi-pencil" *ngIf="role.name !== 'Administrador'&& role.name !== 'Cliente'"
                    class="p-button-outlined p-button-warning p-button-rounded m-1" (click)="openEditRoleModal(role)" pTooltip="Editar"
                    tooltipPosition="bottom"></button>
                <button pButton type="button" icon="pi pi-pencil" *ngIf="role.name === 'Administrador' || role.name === 'Cliente'"
                    class="p-button-outlined p-button-warning p-button-rounded m-1" (click)="openEditRoleModal(role)" pTooltip="Editar"
                    tooltipPosition="bottom" disabled></button>

                <button *ngIf="role.name !== 'Administrador'&& role.name !== 'Cliente'"
                pButton type="button" icon="pi pi-trash"
                    class="p-button-outlined p-button-rounded m-1 p-button-danger" pTooltip="Eliminar"  (click)="deleteRole(role)"
                    tooltipPosition="bottom"></button>
                <button
                     *ngIf="role.name === 'Administrador' || role.name === 'Cliente'"
                pButton type="button" icon="pi pi-trash"
                    class="p-button-outlined p-button-rounded m-1 p-button-danger" pTooltip="Eliminar"  (click)="deleteRole(role)"
                    tooltipPosition="bottom" disabled></button>
            </td>

        </tr>
    </ng-template>
      <ng-template pTemplate="emptymessage">
        <tr>
            <td colspan="9">No se encontraron roles</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>
