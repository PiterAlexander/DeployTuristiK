<h2 class="mt-0 mb-4 flex justify-content-center text-indigo-500">
    Cambiar Contraseña
</h2>

<form
    [formGroup]="formGroup"
    (ngSubmit)="changePassword()"
    class="flex flex-column justify-content-center align-items-center"
>
    <div class="field col-12 lg:col-8">
        <span class="p-input-icon-right w-full">
            <i
                (click)="displayCurrentPassword()"
                class="pi cursor-pointer"
                [ngClass]="{
                    'pi-eye': Visible3,
                    'pi-eye-slash': !Visible3
                }"
            ></i>
            <input
                id="currentPassword"
                [type]="Visible3 ? 'text' : 'password'"
                pInputText
                class="w-full"
                placeholder="Contraseña Actual"
                formControlName="currentPassword"
                required
                onkeydown="return /[a-z A-Z 0-9]/i.test(even.key)"
            />
        </span>
        <small
            class="p-error block"
            *ngIf="formGroup.get('currentPassword').dirty && formGroup.get('currentPassword')?.errors?.['required']"
        >
            Este campo es obligatorio.
        </small>
        <small
            class="p-error block"
            *ngIf="formGroup.get('currentPassword').dirty && formGroup.get('currentPassword')?.errors?.['minlength']"
        >
            Este campo debe tener mínimo 8 caracteres
        </small>
    </div>
    <div class="field col-12 lg:col-8">
        <span class="p-input-icon-right w-full">
            <i
                (click)="displayPassword()"
                class="pi cursor-pointer"
                [ngClass]="{
                    'pi-eye': Visible,
                    'pi-eye-slash': !Visible
                }"
            ></i>
            <input
                pInputText
                placeholder="Ingrese su nueva contraseña"
                class="w-full"
                [type]="Visible ? 'text' : 'password'"
                formControlName="newPassword"
                required="true"
                minlength="8"
                maxlength="30"
                onkeydown="return /[a-z A-Z .*- 0-9]/i.test(even.key)"
            />
        </span>
        <small
            class="p-error block"
            *ngIf="formGroup.get('newPassword').dirty && formGroup.get('newPassword')?.errors?.['required']"
        >
            Este campo es obligatorio.
        </small>
        <small
            class="p-error block"
            *ngIf="formGroup.get('newPassword').dirty && formGroup.get('newPassword')?.errors?.['minlength']"
        >
            Este campo debe tener mínimo 8 caracteres
        </small>
    </div>
    <div class="field col-12 lg:col-8">
        <span class="p-input-icon-right w-full">
            <i
                (click)="displayConfirmPassword()"
                class="pi cursor-pointer"
                [ngClass]="{
                    'pi-eye': Visible2,
                    'pi-eye-slash': !Visible2
                }"
            ></i>
            <input
                pInputText
                placeholder="Ingrese la confirmación de su nueva contraseña"
                class="w-full"
                [type]="Visible2 ? 'text' : 'password'"
                formControlName="confirmPassword"
                required="true"
                minlength="8"
                maxlength="30"
                onkeydown="return /[a-z A-Z .*- 0-9]/i.test(even.key)"
            />
        </span>
        <small
            class="p-error block"
            *ngIf="formGroup.get('confirmPassword').dirty && formGroup.get('confirmPassword')?.errors?.['required']"
        >
            Este campo es obligatorio.
        </small>
        <small
            class="p-error block"
            *ngIf="
                formGroup.get('confirmPassword').dirty && !validatePassword()
            "
        >
            Las contraseñas deben coincidir
        </small>
    </div>
    <div class="grid flex justify-content-center w-full">
        <div class="flex flex-colum col-12 lg:col-8 justify-content-center align-items-center">
            <button
                type="button"
                id="cancelButton"
                pButton
                pRipple
                label="Cancelar"
                icon="pi pi-times"
                class="w-4 p-button-outlined mr-3"
                ng-reflect-label="Cancelar"
                (click)="cancel()"
            ></button>
            <button
                type="submit"
                id="saveButton"
                pButton
                pRipple
                label="Cambiar Contraseña"
                class="w-6"
                ng-reflect-label="Cambiar Contraseña"
                [disabled]="!validForm()"
            ></button>
            
        </div>
    </div>
</form>
